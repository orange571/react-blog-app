{
  "rules": {
    ".read": false,
    ".write": false,
    "users":{
      "$user_id": {
        ".write":"$user_id === auth.uid",
        ".read":"$user_id === auth.uid",
        "posts":{
        	"$post_id":{
            ".read": "true",
            ".validate": "newData.hasChildren(['title','author','createdAt','body'])",
            "title": {
              ".validate":"newData.isString() && newData.val().length > 0"
            },
            "author" : {
              ".validate":"newData.isString()" },
            "createdAt": {
              ".validate":"newData.isNumber()",
            },
            "body": {
              ".validate":"newData.isString() && newData.val().length > 0"
            },
            "isReadable":{
              ".validate":"newData.isBoolean()"
            },
            "$other" : {
              ".validate":false
            }
          }
        }

      }
     }
  }
}


{
  "rules": {
    ".read": false,
    ".write": false,
    "users":{
        "$user_id": {
          ".write":"$user_id === auth.uid",
          ".read":"$user_id === auth.uid",
        }
     },
     "posts":{
        "$post_id":{
          ".read": "data.parent().parent().child('users').child(auth.uid).child('posts').child('$post_id').exists()",
          ".write": "data.parent().parent().child('users').child(auth.uid).child('posts').child('$post_id').exists()",
          ".validate": "newData.hasChildren(['title','author','createdAt','body'])",
          "title": {
            ".validate":"newData.isString() && newData.val().length > 0"
          },
          "author" : {
            ".validate":"newData.isString()" },
          "createdAt": {
            ".validate":"newData.isNumber()",
          },
          "body": {
            ".validate":"newData.isString() && newData.val().length > 0"
          },
          "isReadable":{
            ".validate":"newData.isBoolean()"
          },
          "$other" : {
            ".validate":false
          }
        }
    }
  }
}

{
  "rules": {
    ".read": true,
    ".write": true,
    "users":{
        "$user_id": {
         // ".write":"$user_id === auth.uid",
         // ".read":"$user_id === auth.uid",
         // "posts": {
         //   	"$post_id":{
          //      ".validate":"newData.isBoolean()"
         //     }
        //  }
        }
     },
     "posts":{
        "$post_id":{
          //".read": "data.parent().parent().child('users').child(auth.uid).child('posts').child('$post_id').exists()",
         // ".write": "data.parent().parent().child('users').child(auth.uid).child('posts').child('$post_id').val() == true",
          ".validate": "newData.hasChildren(['title','author','createdAt','body'])",
          "title": {
            ".validate":"newData.isString() && newData.val().length > 0"
          },
          "author" : {
            ".validate":"newData.isString()" },
          "createdAt": {
            ".validate":"newData.isNumber()",
          },
          "body": {
            ".validate":"newData.isString() && newData.val().length > 0"
          },
          "isReadable":{
            ".validate":"newData.isBoolean()"
          },
          "$other" : {
            ".validate":false
          }
        }
    }
  }
}
